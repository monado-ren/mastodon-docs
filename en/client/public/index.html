<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=/favicon.ico><link rel=stylesheet href=https://docs.monado.ren/style.min.ac66b095598a93816a47e5ef5b071058047fa4bd8770cb4515ca10c1ad6f91c0.css><script src=https://docs.monado.ren/main.min.db37c27117ff8400e5e30549f6806d2bc825668b596d81316c6148417f59bc72.js async></script><title>Playing with public data - Mastodon文档 -Monado-</title><meta property="og:type" content="article"><meta property="og:url" content="https://docs.monado.ren/en/client/public/"><meta name=description content="Familiarizing yourself with endpoints and entities."><meta property="og:description" content="Familiarizing yourself with endpoints and entities."><meta name=twitter:description content="Familiarizing yourself with endpoints and entities."><meta name=twitter:title content="Playing with public data"><meta name=twitter:site content="@joinmastodon"><link rel=canonical href=https://docs.monado.ren/en/client/public/></head><body><div class="container sidebar-layout"><nav class=sidebar><a class=brand href=/><img class=link-logo src=/brand.svg alt=Mastodon></a><ul><li><a href=/en/>What is Mastodon?</a></li><li><span class=sub-title>Using Mastodon</span><ul class=sub-menu><li><a href=/en/user/signup/>Signing up for an account</a></li><li><a href=/en/user/profile/>Setting up your profile</a></li><li><a href=/en/user/posting/>Posting toots</a></li><li><a href=/en/user/network/>Using the network features</a></li><li><a href=/en/user/moderating/>Dealing with unwanted content</a></li><li><a href=/en/user/discoverability/>Promoting yourself and others</a></li><li><a href=/en/user/preferences/>Set your preferences</a></li><li><a href=/en/user/contacts/>More settings</a></li><li><a href=/en/user/external/>Using Mastodon externally</a></li><li><a href=/en/user/moving/>Moving or leaving accounts</a></li><li><a href=/en/user/run-your-own/>Running your own server</a></li></ul></li><li><span class=sub-title>Running Mastodon</span><ul class=sub-menu><li><a href=/en/admin/prerequisites/>Preparing your machine</a></li><li><a href=/en/admin/install/>Installing from source</a></li><li><a href=/en/admin/config/>Configuring your environment</a></li><li><a href=/en/admin/optional/>Installing optional features</a><ul class=sub-menu><li><a href=/en/admin/optional/elasticsearch/>Full-text search</a></li><li><a href=/en/admin/optional/tor/>Hidden services</a></li><li><a href=/en/admin/optional/sso/>Single Sign On</a></li></ul></li><li><a href=/en/admin/setup/>Setting up your new instance</a></li><li><a href=/en/admin/tootctl/>Using the admin CLI</a></li><li><a href=/en/admin/upgrading/>Upgrading to a new release</a></li><li><a href=/en/admin/backups/>Backing up your server</a></li><li><a href=/en/admin/migrating/>Migrating to a new machine</a></li><li><a href=/en/admin/scaling/>Scaling up your server</a></li><li><a href=/en/admin/moderation/>Moderation actions</a></li><li><a href=/en/admin/troubleshooting/>Troubleshooting errors</a><ul class=sub-menu><li><a href=/en/admin/troubleshooting/index-corruption/>Database index corruption</a></li></ul></li></ul></li><li><span class=sub-title>Developing Mastodon apps</span><ul class=sub-menu><li><a href=/en/client/intro/>Getting started with the API</a></li><li><a href=/en/client/public/ class=active>Playing with public data</a></li><li><a href=/en/client/token/>Obtaining client app access</a></li><li><a href=/en/client/authorized/>Logging in with an account</a></li><li><a href=/en/client/guidelines/>Guidelines and best practices</a></li><li><a href=/en/client/libraries/>Libraries and implementations</a></li></ul></li><li><span class=sub-title>Contributing to Mastodon</span><ul class=sub-menu><li><a href=/en/dev/overview/>Technical overview</a></li><li><a href=/en/dev/setup/>Setting up a dev environment</a></li><li><a href=/en/dev/code/>Code structure</a></li><li><a href=/en/dev/routes/>Routes</a></li><li><a href=/en/dev/disclosure/>Bug bounties and responsible disclosure</a></li></ul></li><li><span class=sub-title>Spec compliance</span><ul class=sub-menu><li><a href=/en/spec/activitypub/>ActivityPub</a></li><li><a href=/en/spec/webfinger/>WebFinger</a></li><li><a href=/en/spec/security/>Security</a></li><li><a href=/en/spec/microformats/>Microformats</a></li><li><a href=/en/spec/oauth/>OAuth</a></li><li><a href=/en/spec/bearcaps/>Bearcaps</a></li></ul></li><li><span class=sub-title>REST API</span><ul class=sub-menu><li><a href=/en/api/oauth-scopes/>OAuth Scopes</a></li><li><a href=/en/api/rate-limits/>Rate limits</a></li></ul></li><li><span class=sub-title>API Methods</span><ul class=sub-menu><li><a href=/en/methods/apps/>apps</a><ul class=sub-menu><li><a href=/en/methods/apps/oauth/>oauth</a></li></ul></li><li><a href=/en/methods/accounts/>accounts</a><ul class=sub-menu><li><a href=/en/methods/accounts/bookmarks/>bookmarks</a></li><li><a href=/en/methods/accounts/favourites/>favourites</a></li><li><a href=/en/methods/accounts/mutes/>mutes</a></li><li><a href=/en/methods/accounts/blocks/>blocks</a></li><li><a href=/en/methods/accounts/domain_blocks/>domain_blocks</a></li><li><a href=/en/methods/accounts/filters/>filters</a></li><li><a href=/en/methods/accounts/reports/>reports</a></li><li><a href=/en/methods/accounts/follow_requests/>follow_requests</a></li><li><a href=/en/methods/accounts/endorsements/>endorsements</a></li><li><a href=/en/methods/accounts/featured_tags/>featured_tags</a></li><li><a href=/en/methods/accounts/preferences/>preferences</a></li><li><a href=/en/methods/accounts/suggestions/>suggestions</a></li></ul></li><li><a href=/en/methods/statuses/>statuses</a><ul class=sub-menu><li><a href=/en/methods/statuses/media/>media</a></li><li><a href=/en/methods/statuses/polls/>polls</a></li><li><a href=/en/methods/statuses/scheduled_statuses/>scheduled_statuses</a></li></ul></li><li><a href=/en/methods/timelines/>timelines</a><ul class=sub-menu><li><a href=/en/methods/timelines/conversations/>conversations</a></li><li><a href=/en/methods/timelines/lists/>lists</a></li><li><a href=/en/methods/timelines/markers/>markers</a></li><li><a href=/en/methods/timelines/streaming/>streaming</a></li></ul></li><li><a href=/en/methods/notifications/>notifications</a><ul class=sub-menu><li><a href=/en/methods/notifications/push/>push</a></li></ul></li><li><a href=/en/methods/search/>search</a></li><li><a href=/en/methods/instance/>instance</a><ul class=sub-menu><li><a href=/en/methods/instance/trends/>trends</a></li><li><a href=/en/methods/instance/directory/>directory</a></li><li><a href=/en/methods/instance/custom_emojis/>custom_emojis</a></li></ul></li><li><a href=/en/methods/admin/>admin</a></li><li><a href=/en/methods/announcements/>announcements</a></li><li><a href=/en/methods/proofs/>proofs</a></li><li><a href=/en/methods/oembed/>oembed</a></li></ul></li><li><span class=sub-title>API Entities</span><ul class=sub-menu><li><a href=/en/entities/account/>Account</a></li><li><a href=/en/entities/activity/>Activity</a></li><li><a href=/en/entities/admin-account/>Admin::Account</a></li><li><a href=/en/entities/admin-report/>Admin::Report</a></li><li><a href=/en/entities/announcement/>Announcement</a></li><li><a href=/en/entities/announcementreaction/>AnnouncementReaction</a></li><li><a href=/en/entities/application/>Application</a></li><li><a href=/en/entities/attachment/>Attachment</a></li><li><a href=/en/entities/card/>Card</a></li><li><a href=/en/entities/context/>Context</a></li><li><a href=/en/entities/conversation/>Conversation</a></li><li><a href=/en/entities/emoji/>Emoji</a></li><li><a href=/en/entities/error/>Error</a></li><li><a href=/en/entities/featuredtag/>FeaturedTag</a></li><li><a href=/en/entities/field/>Field</a></li><li><a href=/en/entities/filter/>Filter</a></li><li><a href=/en/entities/history/>History</a></li><li><a href=/en/entities/identityproof/>IdentityProof</a></li><li><a href=/en/entities/instance/>Instance</a></li><li><a href=/en/entities/list/>List</a></li><li><a href=/en/entities/marker/>Marker</a></li><li><a href=/en/entities/mention/>Mention</a></li><li><a href=/en/entities/notification/>Notification</a></li><li><a href=/en/entities/poll/>Poll</a></li><li><a href=/en/entities/preferences/>Preferences</a></li><li><a href=/en/entities/pushsubscription/>PushSubscription</a></li><li><a href=/en/entities/relationship/>Relationship</a></li><li><a href=/en/entities/report/>Report</a></li><li><a href=/en/entities/results/>Results</a></li><li><a href=/en/entities/scheduledstatus/>ScheduledStatus</a></li><li><a href=/en/entities/source/>Source</a></li><li><a href=/en/entities/status/>Status</a></li><li><a href=/en/entities/tag/>Tag</a></li><li><a href=/en/entities/token/>Token</a></li></ul></li></ul></nav><main><h1>Playing with public data</h1><p>Familiarizing yourself with endpoints and entities.</p><aside><nav id=TableOfContents><ul><li><ul><li><a href=#endpoints>Endpoints explained</a></li><li><a href=#timelines>Fetching public timelines</a></li><li><a href=#toots>Fetching public accounts and statuses</a></li><li><a href=#instance>Fetching public instance data</a></li></ul></li></ul></nav></aside><div class=e-content><p>Now that you know how to construct HTTP requests using cURL or your favorite programming language's HTTP utility or library, it is time to learn about endpoints and responses.</p><h2 id=endpoints>Endpoints explained</h2><p>All HTTP requests are made against a target URL. When you request data to or from a website, you do so by using a specific URL. Depending on the URL, your request will be interpreted by the HTTP server and the appropriate response will be returned to you.</p><p>Examples will be written using the fictional Mastodon website, mastodon.example, which is hosted at <code>https://mastodon.example</code>. The root of this website is <code>/</code>, and specific subdirectories and paths are known as endpoints. Mastodon's API endpoints are nested under the <code>/api</code> namespace, and most methods currently have their endpoints under <code>/api/v1</code>. Requests will be listed by their HTTP method and their endpoint; for example, GET /api/v1/endpoint should be interpreted as a GET request made to that endpoint on your domain, or in other words, <code>https://mastodon.example/api/v1/endpoint</code>.</p><h2 id=timelines>Fetching public timelines</h2><p>Let's take a look at one of the most basic use cases for public data from Mastodon &ndash; the public timelines.</p><p>We can try to request <a href=/en/methods/timelines/>GET /api/v1/timelines/public</a> like so:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl https://mastodon.example/api/v1/timelines/public
</code></pre></div><p>Wow, that's a lot of text in response! The public timeline returns 20 statuses by default. We can use the <code>limit</code> parameter to request less than that. Let's try requesting the same endpoint, but with a limit of 2 this time:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl https://mastodon.example/api/v1/timelines/public?limit<span style=color:#ff79c6>=</span><span style=color:#bd93f9>2</span>
</code></pre></div><p>Our response should be more manageable this time. We can parse or beautify this JSON with our chosen utility, and we should see that the response looks something like this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>[
  {
    <span style=color:#f1fa8c>&#34;id&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;103206804533200177&#34;</span>,
    <span style=color:#f1fa8c>&#34;created_at&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;2019-11-26T23:27:31.000Z&#34;</span>,
    ...
    <span style=color:#f1fa8c>&#34;visibility&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;public&#34;</span>,
    ...
  },
  {
    <span style=color:#f1fa8c>&#34;id&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;103206804086086361&#34;</span>,
    <span style=color:#f1fa8c>&#34;created_at&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;2019-11-26T23:27:32.000Z&#34;</span>,
    ...
    <span style=color:#f1fa8c>&#34;visibility&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;public&#34;</span>,
    ...
  }
]
</code></pre></div><p>We can do similarly for hashtags by calling <a href=/en/methods/timelines/#hashtag-timeline>GET /api/v1/timelines/tag/:hashtag</a> &ndash; here, the colon means that this part of the endpoint is a path parameter. In the case of :hashtag, this means we use the hashtag's name (and once again, a limit of 2):</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>curl https://mastodon.example/api/v1/timelines/tag/cats?limit<span style=color:#ff79c6>=</span><span style=color:#bd93f9>2</span>
</code></pre></div><p>We should once again see 2 statuses have been returned in a JSON array of <a href=/en/entities/status/>Status</a> entities. We can parse the JSON by array, then by object. If we were using Python, our code might look something like this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#ff79c6>import</span> requests
<span style=color:#ff79c6>import</span> json

response <span style=color:#ff79c6>=</span> requests<span style=color:#ff79c6>.</span>get(<span style=color:#f1fa8c></span><span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>https://mastodon.example/api/v1/timelines/tag/cats?limit=2</span><span style=color:#f1fa8c>&#34;</span>)
statuses <span style=color:#ff79c6>=</span> json<span style=color:#ff79c6>.</span>loads(response<span style=color:#ff79c6>.</span>text) <span style=color:#6272a4># this converts the json to a python list of dictionary</span>
<span style=color:#ff79c6>assert</span> statuses[<span style=color:#bd93f9>0</span>][<span style=color:#f1fa8c></span><span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>visibility</span><span style=color:#f1fa8c>&#34;</span>] <span style=color:#ff79c6>==</span> <span style=color:#f1fa8c></span><span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>public</span><span style=color:#f1fa8c>&#34;</span> <span style=color:#6272a4># we are reading a public timeline</span>
<span style=color:#ff79c6>print</span>(statuses[<span style=color:#bd93f9>0</span>][<span style=color:#f1fa8c></span><span style=color:#f1fa8c>&#34;</span><span style=color:#f1fa8c>content</span><span style=color:#f1fa8c>&#34;</span>]) <span style=color:#6272a4># this prints the status text</span>
</code></pre></div><div class="hint hint-info"><div class=hint-icon><i class="fa fa-info-circle"></i></div>Parsing JSON and using it in your program is outside of the scope of this tutorial, as it will be different depending on your choice of programming language and on the design of your program. Look for other tutorials on how to work with JSON in your programming language of choice.</div><div class="hint hint-info"><div class=hint-icon><i class="fa fa-info-circle"></i></div><a href=https://mastovue.glitch.me>MastoVue</a> is an example of an application that lets you browse public timelines.</div><h2 id=toots>Fetching public accounts and statuses</h2><p>Now that we are familiar with how to make requests and how to handle responses, you can experiment with more public data. The following methods may be of interest:</p><ul><li>Once you know an account's id, you can use <a href=/en/methods/accounts/>GET /api/v1/accounts/:id</a> to view the <a href=/en/entities/account/>Account</a> entity.<ul><li>To view public statuses posted by that account, you can use <a href=/en/methods/statuses/>GET /api/v1/accounts/:id/statuses</a> and parse the resulting array of <a href=/en/entities/status/>Status</a> entities.</li></ul></li><li>Once you know a status's id, you can use <a href=/en/methods/statuses/#view-specific-status>GET /api/v1/statuses/:id</a> to view the Status entity.<ul><li>You can also use <a href=/en/methods/statuses/#boosted-by>GET /api/v1/statuses/:id/reblogged_by</a> to view who boosted that status,</li><li>or <a href=/en/methods/statuses/#favourited-by>GET /api/v1/statuses/:id/favourited_by</a> to view who favourited that status.</li><li>Requesting <a href=/en/methods/statuses/#parent-and-child-statuses>GET /api/v1/statuses/:id/context</a> will show you the ancestors and descendants of that status in the tree that is the conversational thread.</li><li>If the status has a poll attached, you can use <a href=/en/methods/statuses/polls/>GET /api/v1/polls/:id</a> to view the poll separately.</li></ul></li></ul><p>IDs of accounts and statuses are local to the Mastodon website's database and will differ for each Mastodon website.</p><h2 id=instance>Fetching public instance data</h2><p>One last thing you can do with anonymous requests is to view information about the Mastodon website.</p><ul><li>View general information with <a href=/en/methods/instance/#fetch-instance>GET /api/v1/instance</a>,<ul><li>view its peers with <a href=/en/methods/instance/#list-of-connected-domains>GET /api/v1/instance/peers</a> or</li><li>its weekly activity with <a href=/en/methods/instance/#weekly-activity>GET /api/v1/instance/activity</a>, or to</li><li>list all custom emoji available with <a href=/en/methods/instance/custom_emojis/#custom-emoji>GET /api/v1/custom_emojis</a>.</li></ul></li><li>See <a href=/en/methods/instance/directory/#view-profile-directory>GET /api/v1/directory</a> for a directory of all available profiles.</li><li>See <a href=/en/methods/instance/trends/#trending-tags>GET /api/v1/trends</a> for currently trending hashtags.</li></ul><div class="hint hint-info"><div class=hint-icon><i class="fa fa-info-circle"></i></div>For a practical example of what you can do with just instance data, see <a href=https://emojos.in/>emojos.in</a>, which lets you preview all custom emoji at a given instance.</div><p style=color:#687590>Last updated August 10, 2020 · <a href=https://github.com/chasedream1129/mastodon-docs/tree/master/content/en/client/public.md style=color:#687590>Improve this page</a></p></div></main></div></body></html>