<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=/favicon.ico><link rel=stylesheet href=https://docs.monado.ren/style.min.ac66b095598a93816a47e5ef5b071058047fa4bd8770cb4515ca10c1ad6f91c0.css><script src=https://docs.monado.ren/main.min.db37c27117ff8400e5e30549f6806d2bc825668b596d81316c6148417f59bc72.js async></script><title>WebFinger - Mastodon文档 -Monado-</title><meta property="og:type" content="article"><meta property="og:url" content="https://docs.monado.ren/en/spec/webfinger/"><meta name=description content="Translate `user@domain` mentions to actor profile URIs."><meta property="og:description" content="Translate `user@domain` mentions to actor profile URIs."><meta name=twitter:description content="Translate `user@domain` mentions to actor profile URIs."><meta name=twitter:title content="WebFinger"><meta name=twitter:site content="@joinmastodon"><link rel=canonical href=https://docs.monado.ren/en/spec/webfinger/></head><body><div class="container sidebar-layout"><nav class=sidebar><a class=brand href=/><img class=link-logo src=/brand.svg alt=Mastodon></a><ul><li><a href=/en/>What is Mastodon?</a></li><li><span class=sub-title>Using Mastodon</span><ul class=sub-menu><li><a href=/en/user/signup/>Signing up for an account</a></li><li><a href=/en/user/profile/>Setting up your profile</a></li><li><a href=/en/user/posting/>Posting toots</a></li><li><a href=/en/user/network/>Using the network features</a></li><li><a href=/en/user/moderating/>Dealing with unwanted content</a></li><li><a href=/en/user/discoverability/>Promoting yourself and others</a></li><li><a href=/en/user/preferences/>Set your preferences</a></li><li><a href=/en/user/contacts/>More settings</a></li><li><a href=/en/user/external/>Using Mastodon externally</a></li><li><a href=/en/user/moving/>Moving or leaving accounts</a></li><li><a href=/en/user/run-your-own/>Running your own server</a></li></ul></li><li><span class=sub-title>Running Mastodon</span><ul class=sub-menu><li><a href=/en/admin/prerequisites/>Preparing your machine</a></li><li><a href=/en/admin/install/>Installing from source</a></li><li><a href=/en/admin/config/>Configuring your environment</a></li><li><a href=/en/admin/optional/>Installing optional features</a><ul class=sub-menu><li><a href=/en/admin/optional/elasticsearch/>Full-text search</a></li><li><a href=/en/admin/optional/tor/>Hidden services</a></li><li><a href=/en/admin/optional/sso/>Single Sign On</a></li></ul></li><li><a href=/en/admin/setup/>Setting up your new instance</a></li><li><a href=/en/admin/tootctl/>Using the admin CLI</a></li><li><a href=/en/admin/upgrading/>Upgrading to a new release</a></li><li><a href=/en/admin/backups/>Backing up your server</a></li><li><a href=/en/admin/migrating/>Migrating to a new machine</a></li><li><a href=/en/admin/scaling/>Scaling up your server</a></li><li><a href=/en/admin/moderation/>Moderation actions</a></li><li><a href=/en/admin/troubleshooting/>Troubleshooting errors</a><ul class=sub-menu><li><a href=/en/admin/troubleshooting/index-corruption/>Database index corruption</a></li></ul></li></ul></li><li><span class=sub-title>Developing Mastodon apps</span><ul class=sub-menu><li><a href=/en/client/intro/>Getting started with the API</a></li><li><a href=/en/client/public/>Playing with public data</a></li><li><a href=/en/client/token/>Obtaining client app access</a></li><li><a href=/en/client/authorized/>Logging in with an account</a></li><li><a href=/en/client/guidelines/>Guidelines and best practices</a></li><li><a href=/en/client/libraries/>Libraries and implementations</a></li></ul></li><li><span class=sub-title>Contributing to Mastodon</span><ul class=sub-menu><li><a href=/en/dev/overview/>Technical overview</a></li><li><a href=/en/dev/setup/>Setting up a dev environment</a></li><li><a href=/en/dev/code/>Code structure</a></li><li><a href=/en/dev/routes/>Routes</a></li><li><a href=/en/dev/disclosure/>Bug bounties and responsible disclosure</a></li></ul></li><li><span class=sub-title>Spec compliance</span><ul class=sub-menu><li><a href=/en/spec/activitypub/>ActivityPub</a></li><li><a href=/en/spec/webfinger/ class=active>WebFinger</a></li><li><a href=/en/spec/security/>Security</a></li><li><a href=/en/spec/microformats/>Microformats</a></li><li><a href=/en/spec/oauth/>OAuth</a></li><li><a href=/en/spec/bearcaps/>Bearcaps</a></li></ul></li><li><span class=sub-title>REST API</span><ul class=sub-menu><li><a href=/en/api/oauth-scopes/>OAuth Scopes</a></li><li><a href=/en/api/rate-limits/>Rate limits</a></li></ul></li><li><span class=sub-title>API Methods</span><ul class=sub-menu><li><a href=/en/methods/apps/>apps</a><ul class=sub-menu><li><a href=/en/methods/apps/oauth/>oauth</a></li></ul></li><li><a href=/en/methods/accounts/>accounts</a><ul class=sub-menu><li><a href=/en/methods/accounts/bookmarks/>bookmarks</a></li><li><a href=/en/methods/accounts/favourites/>favourites</a></li><li><a href=/en/methods/accounts/mutes/>mutes</a></li><li><a href=/en/methods/accounts/blocks/>blocks</a></li><li><a href=/en/methods/accounts/domain_blocks/>domain_blocks</a></li><li><a href=/en/methods/accounts/filters/>filters</a></li><li><a href=/en/methods/accounts/reports/>reports</a></li><li><a href=/en/methods/accounts/follow_requests/>follow_requests</a></li><li><a href=/en/methods/accounts/endorsements/>endorsements</a></li><li><a href=/en/methods/accounts/featured_tags/>featured_tags</a></li><li><a href=/en/methods/accounts/preferences/>preferences</a></li><li><a href=/en/methods/accounts/suggestions/>suggestions</a></li></ul></li><li><a href=/en/methods/statuses/>statuses</a><ul class=sub-menu><li><a href=/en/methods/statuses/media/>media</a></li><li><a href=/en/methods/statuses/polls/>polls</a></li><li><a href=/en/methods/statuses/scheduled_statuses/>scheduled_statuses</a></li></ul></li><li><a href=/en/methods/timelines/>timelines</a><ul class=sub-menu><li><a href=/en/methods/timelines/conversations/>conversations</a></li><li><a href=/en/methods/timelines/lists/>lists</a></li><li><a href=/en/methods/timelines/markers/>markers</a></li><li><a href=/en/methods/timelines/streaming/>streaming</a></li></ul></li><li><a href=/en/methods/notifications/>notifications</a><ul class=sub-menu><li><a href=/en/methods/notifications/push/>push</a></li></ul></li><li><a href=/en/methods/search/>search</a></li><li><a href=/en/methods/instance/>instance</a><ul class=sub-menu><li><a href=/en/methods/instance/trends/>trends</a></li><li><a href=/en/methods/instance/directory/>directory</a></li><li><a href=/en/methods/instance/custom_emojis/>custom_emojis</a></li></ul></li><li><a href=/en/methods/admin/>admin</a></li><li><a href=/en/methods/announcements/>announcements</a></li><li><a href=/en/methods/proofs/>proofs</a></li><li><a href=/en/methods/oembed/>oembed</a></li></ul></li><li><span class=sub-title>API Entities</span><ul class=sub-menu><li><a href=/en/entities/account/>Account</a></li><li><a href=/en/entities/activity/>Activity</a></li><li><a href=/en/entities/admin-account/>Admin::Account</a></li><li><a href=/en/entities/admin-report/>Admin::Report</a></li><li><a href=/en/entities/announcement/>Announcement</a></li><li><a href=/en/entities/announcementreaction/>AnnouncementReaction</a></li><li><a href=/en/entities/application/>Application</a></li><li><a href=/en/entities/attachment/>Attachment</a></li><li><a href=/en/entities/card/>Card</a></li><li><a href=/en/entities/context/>Context</a></li><li><a href=/en/entities/conversation/>Conversation</a></li><li><a href=/en/entities/emoji/>Emoji</a></li><li><a href=/en/entities/error/>Error</a></li><li><a href=/en/entities/featuredtag/>FeaturedTag</a></li><li><a href=/en/entities/field/>Field</a></li><li><a href=/en/entities/filter/>Filter</a></li><li><a href=/en/entities/history/>History</a></li><li><a href=/en/entities/identityproof/>IdentityProof</a></li><li><a href=/en/entities/instance/>Instance</a></li><li><a href=/en/entities/list/>List</a></li><li><a href=/en/entities/marker/>Marker</a></li><li><a href=/en/entities/mention/>Mention</a></li><li><a href=/en/entities/notification/>Notification</a></li><li><a href=/en/entities/poll/>Poll</a></li><li><a href=/en/entities/preferences/>Preferences</a></li><li><a href=/en/entities/pushsubscription/>PushSubscription</a></li><li><a href=/en/entities/relationship/>Relationship</a></li><li><a href=/en/entities/report/>Report</a></li><li><a href=/en/entities/results/>Results</a></li><li><a href=/en/entities/scheduledstatus/>ScheduledStatus</a></li><li><a href=/en/entities/source/>Source</a></li><li><a href=/en/entities/status/>Status</a></li><li><a href=/en/entities/tag/>Tag</a></li><li><a href=/en/entities/token/>Token</a></li></ul></li></ul></nav><main><h1>WebFinger</h1><p>Translate `user@domain` mentions to actor profile URIs.</p><aside><nav id=TableOfContents><ul><li><ul><li><a href=#intro>What is WebFinger, and why is it used?</a></li><li><a href=#example>Sample WebFinger flow</a></li></ul></li></ul></nav></aside><div class=e-content><h2 id=intro>What is WebFinger, and why is it used?</h2><p>On Mastodon, user profiles can be hosted either locally on the same website as yours, or remotely on a completely different website. The same username may be used on a different domain. Therefore, a Mastodon user's full mention consists of both the username and the domain, in the form <code>@username@domain</code>. In practical terms, <code>@user@example.com</code> is not the same as <code>@user@example.org</code>. If the domain is not included, Mastodon will try to find a local user named <code>@username</code>. However, in order to deliver to someone over ActivityPub, the <code>@username@domain</code> mention is not enough &ndash; <strong>mentions must be translated to an HTTPS URI first</strong>, so that the remote actor's inbox and outbox can be found.</p><p>Enter WebFinger. WebFinger as described in <a href=https://tools.ietf.org/html/rfc7033>RFC 7033</a> is a spec that defines <strong>a method for resolving links to a resource</strong>, given only a URI on a particular server. This allows anyone to look up where a resource is located without having to know its exact location beforehand; for example, by email or phone number. This lookup is directed at the endpoint <code>/.well-known/webfinger</code>, and a <code>resource</code> query parameter is passed along with the lookup. The resource URI used with Mastodon is the <code>acct:</code> URI as described in <a href=https://tools.ietf.org/html/rfc7565>RFC 7565</a>, with the username of a profile that is hosted on a particular domain.</p><div class="hint hint-danger"><div class=hint-icon><i class="fa fa-exclamation-triangle"></i></div><strong>Because Mastodon heavily relies on mentions for addressing other profiles, WebFinger is required for fully interoperating with Mastodon.</strong> Users can generally load profiles by searching for the direct HTTPS URI if they know it, or for the <code>username@domain</code> address, but Mastodon's internal logic depends almost completely on <code>acct</code>: URIs or <code>username@domain</code> representations. Searching for any objects or profiles from an ActivityPub implementation without WebFinger will fail because the author cannot be converted to a user in the local database.</div><h2 id=example>Sample WebFinger flow</h2><p>Suppose we want to lookup the user <code>@Gargron</code> hosted on the <code>mastodon.social</code> website.</p><p>Simply make a request to that domain's <code>/.well-known/webfinger</code> endpoint, with the <code>resource</code> query parameter set to an <code>acct:</code> URI.</p><figure><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>{
  <span style=color:#f1fa8c>&#34;subject&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;acct:Gargron@mastodon.social&#34;</span>,
  <span style=color:#f1fa8c>&#34;aliases&#34;</span><span style=color:#ff79c6>:</span> [
    <span style=color:#f1fa8c>&#34;https://mastodon.social/@Gargron&#34;</span>,
    <span style=color:#f1fa8c>&#34;https://mastodon.social/users/Gargron&#34;</span>
  ],
  <span style=color:#f1fa8c>&#34;links&#34;</span><span style=color:#ff79c6>:</span> [
    {
      <span style=color:#f1fa8c>&#34;rel&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;http://webfinger.net/rel/profile-page&#34;</span>,
      <span style=color:#f1fa8c>&#34;type&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;text/html&#34;</span>,
      <span style=color:#f1fa8c>&#34;href&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;https://mastodon.social/@Gargron&#34;</span>
    },
    {
      <span style=color:#f1fa8c>&#34;rel&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;self&#34;</span>,
      <span style=color:#f1fa8c>&#34;type&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;application/activity+json&#34;</span>,
      <span style=color:#f1fa8c>&#34;href&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;https://mastodon.social/users/Gargron&#34;</span>
    },
    {
      <span style=color:#f1fa8c>&#34;rel&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;http://ostatus.org/schema/1.0/subscribe&#34;</span>,
      <span style=color:#f1fa8c>&#34;template&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;https://mastodon.social/authorize_interaction?uri={uri}&#34;</span>
    }
  ]
}
</code></pre></div><figcaption><p><a href="https://mastodon.social/.well-known/webfinger?resource=acct:gargron@mastodon.social">https://mastodon.social/.well-known/webfinger?resource=acct:gargron@mastodon.social</a></p></figcaption></figure><p>You can parse this JSON response to find a link with your desired type. For ActivityPub <code>id</code>, we are interested in finding <code>application/activity+json</code> specifically.</p><p>This way, we have translated <code>@Gargron@mastodon.social</code> to <code>https://mastodon.social/users/Gargron</code> and we can now interact over ActivityPub by referring to this URI as <code>id</code> where appropriate.</p><figure><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>{
<span style=color:#f1fa8c>&#34;id&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;https://social.example/activities/1&#34;</span>,
<span style=color:#f1fa8c>&#34;type&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;Create&#34;</span>,
<span style=color:#f1fa8c>&#34;actor&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;https://social.example/actors/1&#34;</span>,
<span style=color:#f1fa8c>&#34;object&#34;</span><span style=color:#ff79c6>:</span> {
    <span style=color:#f1fa8c>&#34;id&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;https://social.example/objects/1&#34;</span>,
    <span style=color:#f1fa8c>&#34;type&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;Note&#34;</span>,
    <span style=color:#f1fa8c>&#34;content&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;Hello, Gargron!&#34;</span>
},
<span style=color:#f1fa8c>&#34;to&#34;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#34;https://mastodon.social/users/Gargron&#34;</span>
}
</code></pre></div><figcaption><p>Sample activity</p></figcaption></figure><p>Note in the above example that <code>social.example</code> does not use the same URI structure as Mastodon. Thus, we cannot simply guess the actor <code>id</code> given only the username and domain. However, if <code>social.example</code> supports WebFinger, then we can get this <code>id</code>simply by requesting <code>https://social.example/.well-known/webfinger?resource=acct:username@social.example</code>and parsing the response for a link with the <code>application/activity+json</code> type.</p><p style=color:#687590>Last updated January 12, 2020 · <a href=https://github.com/chasedream1129/mastodon-docs/tree/master/content/en/spec/webfinger.md style=color:#687590>Improve this page</a></p></div></main></div></body></html>